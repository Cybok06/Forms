<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Login • Admin</title>

<!-- Bootstrap + Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<link rel="icon" href="https://store-images.s-microsoft.com/image/apps.44537.13628881801009959.f429098c-f6ba-4196-a164-1109adc458e8.5f1e249b-7942-4e1d-aa67-487271e222e5" type="image/x-icon">

<style>
  :root{
    --ink:#0b1320;
    --muted:#6b7280;
    --ring:#e5e7eb;
    --soft:#f6f8fb;
    --brand:#0ea5e9;              /* Core blue */
    --brand-dark:#087ab0;
    --brand-ink:#082a3a;
  }
  html,body{height:100%;}
  body{
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    background:
      radial-gradient(1200px 600px at 70% -10%, rgba(14,165,233,.25), transparent 60%),
      radial-gradient(1000px 500px at -10% 110%, rgba(2,132,199,.2), transparent 60%),
      var(--soft);
    color:var(--ink);
  }

  /* Top wave accent */
  .wave{
    position:absolute; inset:0 auto auto 0; width:100%; height:200px; pointer-events:none;
    background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 55%, #0369a1 100%);
    clip-path: path("M0,120 C200,180 400,40 700,120 C950,180 1150,60 1440,120 L1440,0 L0,0 Z");
    filter: saturate(110%) contrast(105%);
    opacity:.85;
  }

  .login-wrap{
    min-height:100%;
    display:grid;
    place-items:center;
    padding:48px 16px;
  }

  .cardx{
    width:100%;
    max-width:440px;
    border:1px solid rgba(8,42,58,.08);
    border-radius:18px;
    background:rgba(255,255,255,.85);
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(2,132,199,.12);
    overflow:hidden;
  }

  .cardx .header{
    padding:28px 28px 18px;
    border-bottom:1px solid var(--ring);
    background:
      linear-gradient(180deg, rgba(14,165,233,.10), rgba(14,165,233,0));
  }

  .brand-badge{
    display:flex; align-items:center; gap:12px;
    font-weight:800; letter-spacing:.2px; color:var(--brand-ink);
  }
  .brand-icon{
    width:42px; height:42px; border-radius:12px;
    display:grid; place-items:center;
    background: linear-gradient(135deg, #0ea5e9, #0369a1);
    color:white; font-size:22px; box-shadow: inset 0 0 0 2px rgba(255,255,255,.25);
  }

  .subtl{ color:var(--muted); }

  .cardx .body{ padding:24px 28px 10px; }

  .form-label{ font-weight:600; color:#0b2030; }
  .form-control, .form-select{
    border-radius:12px; border:1px solid #dfe4ea; padding-top:.65rem; padding-bottom:.65rem;
  }
  .form-control:focus{
    border-color:var(--brand); box-shadow:0 0 0 .2rem rgba(14,165,233,.15);
  }

  .input-group-text{
    border-radius:12px 0 0 12px;
    background:#f1f5f9; color:#0b2030; border-color:#dfe4ea;
  }
  .toggle-pass{
    border:1px solid #dfe4ea; border-left:0; background:#f8fafc; color:#0b2030;
    border-radius:0 12px 12px 0;
  }
  .toggle-pass:hover{ background:#eef2f7; }

  .btn-brand{
    background: linear-gradient(135deg, #0ea5e9, #0284c7);
    border:0; color:#fff; font-weight:700;
    padding:.85rem 1rem; border-radius:12px;
    box-shadow: 0 8px 20px rgba(14,165,233,.35);
  }
  .btn-brand:hover{ filter: brightness(.98); }
  .btn-brand:focus{ box-shadow:0 0 0 .25rem rgba(14,165,233,.25); }

  .support{
    padding:0 28px 22px; color:var(--muted); font-size:.9rem;
  }

  .extras{
    display:flex; justify-content:space-between; align-items:center; gap:10px;
  }

  .alert{
    border-radius:12px; border:0;
    box-shadow: 0 6px 18px rgba(220,38,38,.08);
  }

  /* Tiny logo ribbon */
  .corner-ribbon{
    position:absolute; top:10px; right:-40px; transform:rotate(35deg);
    background:linear-gradient(135deg, #22d3ee, #0ea5e9); color:white;
    font-size:.75rem; padding:6px 50px; box-shadow:0 3px 10px rgba(2,132,199,.35);
  }

  @media (max-width:420px){
    .brand-badge{ font-size:.95rem; }
    .brand-icon{ width:38px; height:38px; font-size:20px; }
    .wave{ height:160px; }
  }
</style>
</head>
<body>
<div class="wave"></div>

<div class="login-wrap">
  <div class="cardx position-relative">
    <div class="corner-ribbon"><i class="bi bi-shield-lock"></i> Secure</div>

    <div class="header">
      <div class="brand-badge">
        <div class="brand-icon"><i class="bi bi-grid-1x2"></i></div>
        <div>
          <div class="h5 m-0">Form Admin</div>
          <div class="subtl">Sign in to continue</div>
        </div>
      </div>
    </div>

    <div class="body">
      <!-- Flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for cat, msg in messages %}
            <div class="alert alert-{{cat}} d-flex align-items-start gap-2 py-2 px-3 mb-3">
              <i class="bi bi-info-circle mt-1"></i>
              <div>{{ msg }}</div>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <form id="loginForm" method="post" action="{{ url_for('login', next=request.args.get('next')) }}" novalidate>
        <!-- Username -->
        <div class="mb-3">
          <label class="form-label" for="username"><i class="bi bi-person-bounding-box me-1"></i> Username</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-person"></i></span>
            <input id="username" name="username" class="form-control" placeholder="admin" required>
          </div>
          <div class="form-text">Use your admin username.</div>
        </div>

        <!-- Password -->
        <div class="mb-2">
          <label class="form-label" for="password"><i class="bi bi-key me-1"></i> Password</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-shield-lock"></i></span>
            <input id="password" name="password" type="password" class="form-control" placeholder="Enter Password" required>
            <button class="btn toggle-pass" type="button" id="togglePass" aria-label="Show password">
              <i class="bi bi-eye"></i>
            </button>
          </div>
        </div>

        <!-- Extras row -->
        <div class="mb-3 extras">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="1" id="rememberMe">
            <label class="form-check-label" for="rememberMe">Remember me</label>
          </div>
          <a href="#" class="link-primary text-decoration-none"><i class="bi bi-question-circle"></i> Forgot password?</a>
        </div>

        <!-- Submit -->
        <div class="d-grid">
          <button id="submitBtn" class="btn btn-brand" type="submit">
            <span class="btn-text"><i class="bi bi-box-arrow-in-right me-2"></i> Sign In</span>
            <span class="btn-loading d-none">
              <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
              Signing in…
            </span>
          </button>
        </div>
      </form>
    </div>

    <div class="support">
      <div class="d-flex align-items-center gap-2">
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script>
  // Show/Hide password
  const passInput = document.getElementById('password');
  const toggleBtn = document.getElementById('togglePass');
  toggleBtn?.addEventListener('click', () => {
    const isPwd = passInput.type === 'password';
    passInput.type = isPwd ? 'text' : 'password';
    toggleBtn.innerHTML = isPwd ? '<i class="bi bi-eye-slash"></i>' : '<i class="bi bi-eye"></i>';
    toggleBtn.setAttribute('aria-label', isPwd ? 'Hide password' : 'Show password');
  });

  // Remember username (localStorage)
  const uname = document.getElementById('username');
  const remember = document.getElementById('rememberMe');

  // Prefill if stored
  (function(){
    const saved = localStorage.getItem('admin.username');
    if(saved){ uname.value = saved; remember.checked = true; }
  })();

  // Save on toggle
  remember?.addEventListener('change', () => {
    if(remember.checked && uname.value.trim()){
      localStorage.setItem('admin.username', uname.value.trim());
    } else {
      localStorage.removeItem('admin.username');
    }
  });

  // Keep updated as user types (if remember is on)
  uname?.addEventListener('input', () => {
    if(remember.checked){
      localStorage.setItem('admin.username', uname.value.trim());
    }
  });

  // Submit loading state + basic client validation
  const form = document.getElementById('loginForm');
  const submitBtn = document.getElementById('submitBtn');
  form?.addEventListener('submit', () => {
    // Bootstrap style quick check
    if(!form.checkValidity()){
      form.classList.add('was-validated');
      return;
    }
    // Lock UI
    submitBtn.disabled = true;
    submitBtn.querySelector('.btn-text').classList.add('d-none');
    submitBtn.querySelector('.btn-loading').classList.remove('d-none');
  });
</script>
</body>
</html>

